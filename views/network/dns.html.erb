<% 
  # require 'onboard/extensions/array' 
%>

<h2>DNS</h2>
<% if msg and msg[:err] %>
  <div class="error"><%= msg[:err] %></div>
<% end %>
<!--
  <pre>
    <%= 
      html_escape objects.pretty_inspect 
    %>
  </pre>
  <pre>
    <%= 
      html_escape params.pretty_inspect 
    %>
  </pre>
-->

<form method="POST">
  <input type="hidden" name="_method" value="put"/>
  <h3>Name servers</h3>
  <table>
    <thead>
      <tr>
        <th>IP address</th>
        <th>Comment</th>
      </tr>
    </thead>
    <tbody>
      <% objects.data['resolvconf']['nameservers'].each do |ns| %>
        <tr>
          <td>
            <input type="text" readonly class="rotext" value="<%= ns %>"/>
          </td>
          <td>
            <em>got automatically (from an upstream router, etc.)</em> 
          </td>
        </tr>
      <% end %>
      <% objects.data['conf']['dns']['nameservers'].each do |nsh| %>
        <tr>
          <td>
            <input type="text" class="rwtext" value="<%= nsh['ip'] %>"/>
          </td>
          <td>
            <input type="text" size="48" class="humantext" value="<%= nsh['comment'] %>"/>
          </td>
        </tr>
      <% end %> 
    </tbody>
  </table>

  <h3>Local domain</h3>
  <em>Machines served by DHCP will register their name in this domain</em><br/>
  <input type="text" class="rwtext" value="<%= objects.data['conf']['dns']['localdomain'] %>"/>

  <h3>Search domain</h3>
  <em>Usually the same as Local domain</em><br/>
  <input type="text" class="rwtext" value="<%= objects.data['conf']['dns']['searchdomain'] %>"/>

  <h3> &nbsp; <!-- Commit changes --></h3>
  <button type="submit">Change</button>
</form>
