<%
  require 'pp'

  vms = objects
%>

<h2>QEMU / kvm</h2>

<h3>Virtual Machines</h3>

<table>
  <thead>
    <tr>
      <th>Running?</th>
      <th>ID</th>
      <th>Drives</th>
      <th>Network</th>
      <th>VNC Display<div class="optinfo" style="text-align:center;">Uses TCP port<br/>5900 + n</div></th>
    </tr>
  </thead>
  <tbody>
<% vms.each do |vm| %>
    <tr>
      <td style="text-align:center"><%= yes_no_icon(false, :print_no) %></td>
      <td><a title="<%= vm.config.uuid %>" href="qemu/vm/<%= vm.config.uuid_short %>.html"><%= vm.config.uuid_short %></a></td>
      <td>
        <pre><%== vm.config.opts['-drive'][0].pretty_inspect %></pre>
      </td>
      <td></td>
      <td style="text-align:right;padding:0 1em;"><%= vm.config.opts['-vnc'] %></td>
    </tr>
<% end %>
  </tbody>
</table>

<h3>Create a new VM</h3>

<form method="POST">
  <table>
    <thead>
    </thead>
    <tbody>
      <tr>
        <th scope="row">Disk Image</th>
        <td>
          <!-- <input type="hidden" name="drive[]" value=""/> -->
          <input type="text" name="drive[][file]"/> 
        </td>
      </tr>
      <tr>
        <th scope="row">VNC Display</th>
        <td>
          <select name="vnc">
            <% 1.upto(31) do |n| %>
              <option value=":<%= n %>">:<%= n %></option>
            <% end %>
          </select>
        </td>
      </tr>
    </tbody>
  </table>
  <button type="submit">Create!</button>
</form>
